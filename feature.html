<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="stylesheet" type="text/css" href="bulma.min.css" />
  </head>
  <body>
    <div class="container">
      <div class="main">
        <div class="head borderBottom">
          <h1 class="title">Script</h1>
          <a href="/">
            <div class="button voltar">Voltar</div>
          </a>
        </div>

        <div class="body">
          <div id="select" class="is-hidden">
            <h1 id="classificacao" class="title notMarginBottom">
              Selecione uma classificação
            </h1>
            <div class="buttons is-flex is-centered">
              <button class="button" value="0">KNN</button>
              <button class="button" value="1">RandomForest</button>
              <button class="button" value="2">Support Vector Machines</button>
              <button class="button" value="3">Dissimilaridade</button>
              <button class="button" value="4">Fusão</button>
            </div>
          </div>

          <div id="loading" class="lds-ellipsis">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>

          <!-- <div id="result" class="result">
            <div class="tile is-ancestor">
              <div class="tile is-vertical is-12">
                <div class="tile">
                  <div class="tile is-parent">
                    <article class="tile is-child notification is-info">
                      <p class="subtitle">Número de acertos</p>
                      <p class="title">37</p>
                    </article>
                    <article class="tile is-child notification is-warning">
                      <p class="subtitle">Porcentagem de acerto</p>
                      <p class="title">23.125</p>
                    </article>
                  </div>
                </div>
              </div>
            </div>
          </div> -->

          <div id="result" class="result is-hidden">
            <div
              id="result-item-1"
              class="result-item notification is-primary"
            ></div>
            <div class="result-item notification is-warning">
              <p class="subtitle">Porcentagem de acerto</p>
              <p class="title">23.125</p>
            </div>
          </div>

          <div id="output" class="is-bold"></div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <script type="module">
      import { getAction } from "./actions.js";
      import {
        output,
        outputDisable,
        resultBox,
        removeResult,
      } from "./functions.js";

      const socket = io("http://localhost:3000/run");

      socket.on("action", function (msg) {
        console.log(msg.data);
        getAction(msg.data);
      });
      socket.on("output", function (msg) {
        console.log(msg);
        output(msg);
      });

      $("#select .buttons .button").click(function (e) {
        outputDisable();
        resultBox(false);
        removeResult();
        var valor = $(this).val();
        var nome = $(this).text();
        socket.emit("selector", valor);
        $("#classificacao").text(nome);
        $("#select .buttons .button").prop("disabled", true);
      });
    </script>
  </body>
</html>
